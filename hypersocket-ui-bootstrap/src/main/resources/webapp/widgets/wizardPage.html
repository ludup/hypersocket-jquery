${header}

<div class="container-fluid content">
	<div id="content" class="row">
		<div class="col-md-2"></div>
		<div class="col-md-8">

			<div id="wizardPage">
				<div id="wizardActions" class="propertyItem form-group buttonBar">
					<a id="resetForm" href="#" localize="text.reset"></a>
				</div>
				<div id="wizardPages" class="panel-group" id="accordion" role="tablist"'
						+ 'aria-multiselectable="false">
				</div>
			</div>
			<div id="pageOne" style="display: none"">
				<input type="text" class="pageState0">
			</div>
		</div>
		<div class="col-md-2"></div>
	</div>
</div>

<script type="text/javascript">
	$(document).ready(function() {

		loadResources(function() {
			
			var steps = new Array();
			steps.push({
				pageDiv: "pageOne",
				onNext: function(nextPage) {
					nextPage();
				}
			});
			steps.push({
				onNext: function(nextPage) {
					nextPage();
				}
			});
			steps.push({
				buttonText: 'text.finish',
				buttonIcon: 'fa-save',
				onNext: function() {
					// This completes the wizard
				}
			});
			
			$.each(steps, function(idx, obj) {
				
				var page = $.extend({
					titleText: getResource('text.step') + '. ' + (idx+1),
					titleIcon: 'fa-flash',
					buttonText: 'text.next',
					buttonIcon: 'fa-forward'
				}, obj);
				
				debugger;
				
				$('#wizardPages').append(
						'<div id="panel' + idx + '" class="panel panel-default wizardPage" style="display: none">'
						+ '<div class="panel-heading" role="tab" id="heading' + idx + '">'
						+ ' 	<h4 class="panel-title wizardTitle"><i class="fa ' + page.titleIcon + '"></i>&nbsp;'
						+ '		    <a data-toggle="collapse" data-parent="#accordion"'
						+ '				href="#collapse' + idx + '" aria-expanded="' + (idx > 0 ? "false" : "true") + '"'
						+ '				aria-controls="collapse' + idx + '" >' + getResourceOrText(page.titleText) + '</a>'
						+ '	    </h4>'
						+ '</div>'
						+ '<div id="collapse' + idx + '" class="panel-collapse collapse' + (idx == 0 ? ' in' : '') + '"'
						+ '	role="tabpanel" aria-labelledby="heading' + idx + '">'
						+ '	<div class="panel-body"><div id="page' + idx + '"></div>'
						+ '		<div class="propertyItem form-group buttonBar">'
						+ '			<button class="nextButton pageState' + idx + ' btn btn-primary">'
						+ '				<i class="fa ' + page.buttonIcon + '"></i><span localize="' + page.buttonText + '"></span>'
						+ '			</button>'
						+ '		</div>'
						+ '</div>'
						+ '</div>'
						+ '</div>');
				
				$('#panel' + idx).data('page', page);
				$('#panel' + idx).data('index', idx);
				
				$('#' + page.pageDiv).detach().appendTo('#page' + idx).show();
			});
			
			$('.wizardPage').first().show();
			
			$('#content').localize();

			
			$('.nextButton').click(function() {

				var page = $(this).closest('.panel').data('page');
				var idx = $(this).closest('.panel').data('index');
				
				if(page.onNext) {
					page.onNext(function() {
						
						if(steps.length > idx + 1) {
							
							var nextPage = idx + 1;
		 					$('.pageState' + idx).attr('disabled', true);
							$('#panel' + nextPage).show();
							$('#collapse' + idx).collapse('hide');
							$('#collapse' + nextPage).collapse('show');
						}
					});
				}

			});

			$('#resetForm').click(function() {
				
				$.each(steps, function(idx, obj) {
					if(steps.onReset) {
						steps.onReset();
					}
				});
				
				$('.nextButton').attr('disabled', false);

				$('.panel:gt(0)').hide();
				$('.collapse:gt(0)').collapse('hide');
				
				$('.panel').first().show();
				$('.collapse').first().collapse('show');
			});
		});
	});
</script>
${footer}
