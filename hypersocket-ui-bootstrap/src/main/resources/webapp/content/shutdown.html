<div id="content">
	<div id="shutdownContent"
		class="ui-widget-content ui-widget ui-corner-all">
		<div id="shutdownTitle" class="ui-widget-header ui-corner-all">
			<span localize="shutdown.title"></span>
		</div>
		<form id="shutdownForm">
			<div class="shutdownField">
				<div class="shutdownLabel">
					<label for="action">&nbsp</label>
				</div>
				<div class="shutdownInput">
					<input id="shutdown" name="action" type="radio" checked value="false"><span localize="shutdown.label"></span></input>
				</div>
			</div>
			<div class="shutdownField">
				<div class="shutdownLabel">
					<label for="action">&nbsp</label>
				</div>
				<div class="shutdownInput">
					<input id="restart" name="action" type="radio" value="true"><span localize="restart.label"></span></input>
				</div>
			</div>
			<div class="shutdownField">
				<div class="shutdownLabel">
					<label for="delay" localize="delay.label"></label>
				</div>
				<div class="shutdownInput">
					<input type="text" name="delay" id="delay" value="0"
						class="text ui-widget-content ui-corner-all">
				</div>
			</div>
			<div id="shutdownSubmit">
				<input type="button" id="shutdownButton" name="shutdownButton"
					value="Shutdown"
					class="ui-button ui-widget ui-state-default ui-corner-all"
					role="button" aria-disabled="false">
			</div>
		</form>
	</div>
</div>
<script type="text/javascript">

$(document).ready(function() {
	
	$('#content').localize();
	
	$('#shutdownButton').val(getResource('shutdown.label'));
	
	$('input:radio[name=action]').click(function() {
		$('#shutdownButton').val(getResource($(this).attr('id') + '.label'));
	});
	
	$('#shutdownButton').click(function(e) {
		e.preventDefault();
		
		if($('input:radio[name=action]:checked').val() == 'true') {
			getJSON('restart/' + $('#delay').val(), null, function(data) {
				if(data.success) {
					showInformation(false, data.message);
				} else {
					showError(false, data.message);
				}
			});
		} else {
			getJSON('shutdown/' + $('#delay').val(), null, function(data) {
				if(data.success) {
					showInformation(false, data.message);
				} else {
					showError(false, data.message);
				}
			});
		}
		
	});
	
	loadComplete();
});

</script>