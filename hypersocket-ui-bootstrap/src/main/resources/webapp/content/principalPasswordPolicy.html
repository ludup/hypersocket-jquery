<div data-id="principalPasswordPolicy" class="extendedTabContent">
    <div data-id="policyTab" class="col-md-6">   	
    </div>
    <div data-id="infoTab" class="col-md-6">   	
    </div>
</div>
<script type="text/javascript">
$(document).ready(function() {

    $('.extendedTabContent').data('initPage', function(resource, data) {
        var _$ = function(jq) { return $(jq + '_' + resource.id);}
        var el = _$('#policyTab');
        el.empty();
        //var spinner = el.startSpin();
		el.passwordPolicy({
			policy: 'principal',
			showPolicyName: true,
			showRulesDefault: true,
			principalId: resource.id,
			showGenerator: false,
			complete: function() {
				var el2 = _$('#infoTab');
			    el2.empty();
				el2.append('<h4 localize="passwordInformation.text"></h4>')
			    el2.append('<div class="row"><label localize="password.lastChanged" class="col-xs-6"></label><span class="col-xs-6">' + new Date(resource.lastPasswordChange).format('ddd, dd mmm yyyy HH:MM') + '</span></div>');
			    el2.append('<div class="row"><label localize="password.needsChanging" class="col-xs-6"></label><span class="col-xs-6">' + (resource.passwordChangeRequired ? getResource('text.yes') : getResource('text.no'))  + '</span></div>');
			    el2.append('<div class="row"><label localize="password.changeAllowed" class="col-xs-6"></label><span class="col-xs-6">' + (resource.passwordChangeAllowed ? getResource('text.yes') : getResource('text.no'))  + '</span></div>');
			    el2.append('<div class="row"><label localize="password.expiring" class="col-xs-6"></label><span class="col-xs-6">' + (resource.passwordExpiring ? getResource('text.yes') : getResource('text.no'))  + '</span></div>');
			    if(resource.passwordExpiring) {
			    	el2.append('<div class="row"><label localize="password.expires" class="col-xs-6"></label><span class="col-xs-6">' + new Date(resource.passwordExpiry).format('ddd, dd mmm yyyy HH:MM') + '</span></div>');
			    }
			    el2.localize();
				//spinner.stopSpin();
			}
		});
    });
	
});
</script>